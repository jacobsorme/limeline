<!doctype html>
<html>
<head>
<style>
  .occupations {
    background-color: #f00;
    border: 1px solid #000;
    width:300px;
  }
  .interface_buttons {
    display: block;
    margin-right: 0px;
  }

</style>
</head>
<body>
<meta charset="utf-8">
<img src="logo1.png" height="50px">
<br>
LimeLine - A timeline for limelight<br>

<table>
  <th>Text area</th>
  <th>Occupations</th>
  <tr>
    <td>
      <textarea id="textarea" rows="9" cols="60" spellcheck="false" style="background:#eee"></textarea><br>
      <input type="color" value="#ff00ff">
      <input type="button" onclick="submit()" value="Submit">
      <input type="button" onclick="clearTextarea()" value="Clear"><br>
      <input type="button" id="copy" value="Save project to clipboard"><br>
      <input type="button" onclick="load()" value="Load"><input id="load" type="text" placeholder="Paste here">
    </td>
    <td>
      <table id="jobs" style="display:block">
      </table>
    </td>
</table>

Years:<input type="number" autocomplete="false" value="1986" id="y1" style="width:50px">
<input type="number" autocomplete="false" value="2000" id="y2" style="width:50px">
<input type="number" autocomplete="false" value="-1" id="y3" style="width:50px"><br>
Write out all years: <input type="checkbox" autocomplete="false" value="Write all years" id="allyears">
Make a jump through years: <input type="checkbox" checked autocomplete="false" value="Write all years" id="dotdotdot">
<br>



<canvas id="canvas" width="1000" height="350" style="border:1px solid #000000;">
Your browser does not support the HTML5 canvas tag.
</canvas>
<br><a id="download" href="#" onclick="timeline.downloadImage()" download="limeline.png">Download Image</a>







<script src="class.js"></script>
<script>
  var canvas = document.getElementById("canvas");

  var timeline = new Timeline(canvas);

  var test1 = {y1:2003,y2:-1,title:"School1",text:"This occupation is active today, \"y2\" is -1",color:"#0f0",layer:3,textPosition:0,showYears:true};
  var test2 = {y1:2009,y2:2012,title:"Job1",text:"Started at 2009.5, middle of 2009. Layer 2",color:"#0ff",layer:2,textPosition:10,showYears:"This could be text"};
  var test3 = {y1:2008,y2:2015,title:"Job2",text:"This occupation has \"showYears\" as false",color:"#f0f",layer:4,textPosition:0,showYears:false};
  var test4 = {y1:2011,y2:2017.5,title:"Activity1",text:"All this text is moved, via \"textPosition\"",color:"#aa0",layer:5,textPosition:150,showYears:true};


  timeline.jobs.push(new Job(timeline.getId(),test1));
  timeline.jobs.push(new Job(timeline.getId(),test2));
  timeline.jobs.push(new Job(timeline.getId(),test3));
  timeline.jobs.push(new Job(timeline.getId(),test4));


  clearTextarea();
  document.getElementById("copy").addEventListener('click',function(event){
    var temp = document.createElement("textarea");
    //console.log(timeline.jobs);
    temp.value=JSON.stringify(timeline.jobs);
    document.body.appendChild(temp);
    temp.select();
    var success = document.execCommand('copy');
    document.body.removeChild(temp);
    var oldmsg = document.getElementById("copy").value;
    var msg = success ? "Copied!" : "Could not copy..";
    document.getElementById("copy").value = msg;
    setTimeout(function(){document.getElementById("copy").value = oldmsg;},500);

  });

  setInterval(bitch,1000);

  function bitch(){
    timeline.render();
  }
  function load(){
    var input = JSON.parse(document.getElementById("load").value);
    timeline.jobs=[];
    for(var i in input){
      timeline.jobs.push(new Job(timeline.getId(),input[i]));
    }
    document.getElementById("load").value ="";
  }

  function submit(){
    console.log("bitsh");
    try {
      var job = new Job(timeline.getId(),JSON.parse(document.getElementById("textarea").value));
      timeline.jobs.push(job);
    } catch(err) {
      console.log(err.message);
    }
  }

  function clearTextarea(){
    console.log("bitsh");
    document.getElementById("textarea").value = "{\n  \"y1\": "+timeline.getY2()+",\n  \"y2\": "+timeline.getY3()+",\n  \"title\": \"\",\n  \"text\": \"\",\n  \"color\": \"\",\n  \"layer\": 3,\n  \"textPosition\": 0,\n  \"showYears\": true\n}";
  }

</script>

</body>
</html>
