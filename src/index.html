<!doctype html>
<html>
<head>
<style>
  .occupations {
    background-color: #f00;
    border: 1px solid #000;
    width:300px;
  }
  .interface_buttons {
    display: block;
    margin-right: 0px;
  }
  table, td, th {
    border: solid 1px #000;
    vertical-align: top;
  }
  #ass:hover {
      background-color:#f0f;
  }

</style>
</head>
<body>
<meta charset="utf-8">

<img src="logo1.png" height="50px">
<br>
LimeLine - A timeline for limelight<br>
This is a tool for making a timeline showing your career - for you CV!<br>
It is important to show people all the good stuff you have done.<br>If you keep it in text it might not be seen, or seen but blurred out by other text.<p>


<table>
  <th>Text area</th>
  <th>Occupations</th>
  <tr>
    <td>
      <textarea class="interactive" id="textarea" rows="9" cols="50" spellcheck="false" style="background:#eee"></textarea><br>
      <input class="interactive" type="color" id="color" value="#ff00ff"><input type="button" onclick="color()" value="Apply color"><br>
      <input class="interactive" type="button" id="submit" onclick="submit()" value="Submit">
      <input class="interactive" type="button" id="clear" onclick="clearTextarea()" value="Clear"><br>
      <input class="interactive" type="button" id="copy" value="Save project to clipboard"><br>
      <input class="interactive" type="button" onclick="load()" id="load_button" value="Load"><input class="interactive" id="load" type="text" placeholder="Paste here">
    </td>
    <td>
      <table id="jobs" style="display:block">
      </table>
    </td>
    <td>
      <div id="explanation" style="max-width:500px">
      </div>
    </td>
</table>

<text id="">Year 1: </text><input type="number" autocomplete="false" value="1986" min="1900" id="y1" style="width:50px">
<br>Year 2: <input type="number" autocomplete="false" value="2000" min="1900" id="y2" style="width:50px">
<br>Year 3: <input type="number" autocomplete="false" value="-1" max="2050" id="y3" style="width:50px"><br>
Write out all years: <input type="checkbox" autocomplete="false" value="Write all years" id="allyears">
Make a jump through years: <input type="checkbox" checked autocomplete="false" value="Write all years" id="dotdotdot">
<br>



<canvas id="canvas" width="1000" height="350" style="border:1px solid #000000;">
Your browser does not support the HTML5 canvas tag.
</canvas>
<br><a id="download" href="#" onclick="timeline.downloadImage()" download="limeline.png">Download Image</a>







<script src="class.js"></script>
<script>
  for(var i of document.getElementsByClassName("interactive")){
    i.addEventListener("mouseover",interactive.bind(null,i));
    i.addEventListener("mouseout",function(){
      document.getElementById("explanation").innerHTML ="";
    });
  }

  function interactive(elem){
    switch(elem.id){
      case("color"):
        document.getElementById("explanation").innerHTML =  "Press here to choose a color."+
                                                            " Use button next to me after choosing, and the color will appear in above!";
        break;
      case("textarea"):
        document.getElementById("explanation").innerHTML =  "Edit occupation here. This thing has some attributes. Every attribute has a value."+
                                                            "The format is this: \"attribute\":value.<p>"+
                                                            "\"y1\": this it the year the occupation started, year 1";
        break;
      case("copy"):
        document.getElementById("explanation").innerHTML =  "Use this to copy whole project to clipboard."+
                                                            " You can paste into a document on your computer."+
                                                            "This is for saving the project, not the actual picture."+
                                                            "This way you can close this page and keep editing tomorrow.";
        break;
      case("load"):
        document.getElementById("explanation").innerHTML ="Paste a project here";
        break;
      case("load_button"):
        document.getElementById("explanation").innerHTML ="Press here to load a project that you pasted";
        break;
      case("submit"):
        document.getElementById("explanation").innerHTML ="Add the occupation specified in text area above to the timeline";
        break;
      case("clear"):
        document.getElementById("explanation").innerHTML ="Clear the text area from things you added.";
      default:
        break;
    }
  }

  var canvas = document.getElementById("canvas");

  var timeline = new Timeline(canvas);

  var test1 = {start:2003,end:-1,title:"School1",text:"This occupation is active today, \"y2\" is -1",color:"#0f0",layer:3,textPosition:0,showYears:true};
  var test2 = {start:2009,end:2012,title:"Job1",text:"Started at 2009.5, middle of 2009. Layer 2",color:"#0ff",layer:2,textPosition:10,showYears:"This could be text"};
  var test3 = {start:2008,end:2015,title:"Job2",text:"This occupation has \"showYears\" as false",color:"#f0f",layer:4,textPosition:0,showYears:false};
  var test4 = {start:2011,end:2017.5,title:"Activity1",text:"All this text is moved, via \"textPosition\"",color:"#aa0",layer:5,textPosition:150,showYears:true};


  timeline.jobs.push(new Job(timeline.getId(),test1));
  timeline.jobs.push(new Job(timeline.getId(),test2));
  timeline.jobs.push(new Job(timeline.getId(),test3));
  timeline.jobs.push(new Job(timeline.getId(),test4));


  clearTextarea();
  document.getElementById("copy").addEventListener('click',function(event){
    var temp = document.createElement("textarea");
    //console.log(timeline.jobs);
    temp.value=JSON.stringify(timeline.jobs);
    document.body.appendChild(temp);
    temp.select();
    var success = document.execCommand('copy');
    document.body.removeChild(temp);
    var oldmsg = document.getElementById("copy").value;
    var msg = success ? "Copied!" : "Could not copy..";
    document.getElementById("copy").value = msg;
    setTimeout(function(){document.getElementById("copy").value = oldmsg;},500);

  });

  setInterval(bitch,1000);

  function bitch(){
    timeline.render();
  }
  function load(){
    var input = JSON.parse(document.getElementById("load").value);
    timeline.jobs=[];
    for(var i in input){
      timeline.jobs.push(new Job(timeline.getId(),input[i]));
    }
    document.getElementById("load").value ="";
  }

  function submit(){
    try {
      var job = new Job(timeline.getId(),JSON.parse(document.getElementById("textarea").value));
      timeline.jobs.push(job);
    } catch(err) {
      console.log(err.message);
    }
    clearTextarea();
  }

  function clearTextarea(){
    console.log("bitsh");
    document.getElementById("textarea").value = "{\n  \"start\": "+timeline.getY2()+",\n  \"end\": "+timeline.getY3()+",\n  \"title\": \"\",\n  \"text\": \"\",\n  \"color\": \"\",\n  \"layer\": 3,\n  \"textPosition\": 0,\n  \"showYears\": true\n}";
  }

  function color(){
    var job = JSON.parse(document.getElementById("textarea").value);
    job.color = document.getElementById("color").value;
    document.getElementById("textarea").value = JSON.stringify(job,null,2);
  }

</script>

</body>
</html>
